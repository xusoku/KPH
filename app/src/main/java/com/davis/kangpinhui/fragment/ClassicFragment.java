package com.davis.kangpinhui.fragment;import android.view.View;import android.widget.AdapterView;import android.widget.LinearLayout;import android.widget.ListView;import android.widget.TextView;import com.davis.kangpinhui.AppApplication;import com.davis.kangpinhui.Model.Category;import com.davis.kangpinhui.Model.basemodel.BaseModel;import com.davis.kangpinhui.R;import com.davis.kangpinhui.adapter.base.CommonBaseAdapter;import com.davis.kangpinhui.adapter.base.ViewHolder;import com.davis.kangpinhui.api.ApiCallback;import com.davis.kangpinhui.api.ApiInstant;import com.davis.kangpinhui.fragment.base.BaseFragment;import com.davis.kangpinhui.views.PinnedHeaderListView;import java.util.ArrayList;import retrofit2.Call;/** * Created by davis on 16/5/19. */public class ClassicFragment extends BaseFragment {    private ListView listView;    private PinnedHeaderListView pinnedHeaderListView;    @Override    protected void initVariable() {    }    @Override    protected int setContentView() {        return R.layout.fragment_classic;    }    @Override    protected void findViews(View view) {        listView = $(R.id.classic_rootid_list);        pinnedHeaderListView = $(R.id.classic_rootid_pinnlist);    }    @Override    protected void onFragmentLoading() {        super.onFragmentLoading();        getLeftData();    }    @Override    protected void initData() {        onFragmentLoading();    }    private void getLeftData() {        Call<BaseModel<ArrayList<Category>>> call = ApiInstant.getInstant().categoryLevel1(AppApplication.apptype);        call.enqueue(new ApiCallback<BaseModel<ArrayList<Category>>>() {            @Override            public void onSucssce(BaseModel<ArrayList<Category>> arrayListBaseModel) {                onFragmentLoadingSuccess();                ArrayList<Category> list = arrayListBaseModel.object;                getBindLeftView(list);            }            @Override            public void onFailure() {                onFragmentLoadingFailed();            }        });    }    private void getBindLeftView(final ArrayList<Category> list) {        list.get(0).isOnclick = true;        final CommonBaseAdapter<Category> adapter = new CommonBaseAdapter<Category>(getActivity(), list, R.layout.fragment_classic_left_item) {            @Override            public void convert(ViewHolder holder, Category itemData, int position) {                TextView textView = holder.getView(R.id.classic_rootid_list_item);                textView.setText(itemData.name);                LinearLayout linearLayout = holder.getView(R.id.classic_rootid_list_item_bg);                if (itemData.isOnclick) {                    linearLayout.setVisibility(View.VISIBLE);                    textView.setBackgroundColor(getResources().getColor(R.color.white));                } else {                    linearLayout.setVisibility(View.GONE);                    textView.setBackgroundColor(getResources().getColor(R.color.colorgray));                }            }        };        listView.setAdapter(adapter);        listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {            @Override            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {                for (Category c :list){                    c.isOnclick=false;                }                list.get(position).isOnclick = true;                adapter.notifyDataSetChanged();            }        });    }    @Override    protected void setListener() {    }}